{% extends "base.html" %}


{% block content %}


    <div class='row'>


     {% include 'event/list-inline.html' with event_post=object detail=True %}

    {% if request.user.is_authenticated %}
        {% if request.user.is_staff %}
         <div class='col-12'>
            <a class='btn btn-primary' href='{{ object.get_edit_url }}'>Edit</a>
            <a class='btn btn-danger' href='{{ object.get_delete_url }}'>Delete</a>
            <a class='btn btn-warning' href='{{ object.get_archive_url }}'>Archive</a>
            <button type="button" class="btn btn-primary" data-toggle="modal" data-id="{{object.id}}" data-target="#share_event">Share</button>
        </div>
        {% endif %}
    {% endif %}

  </div>
  <!-- Modal -->
<div class="modal fade" id="share_event" tabindex="-1" role="dialog" aria-labelledby="share_eventLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="share_eventLabel">Share with below users</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form class="" action="index.html" method="post">
         <select class="form-control" name="shared_users" multiple>
          {% for usr in Users %}
            <option value="{{ usr.id }}">{{usr.username}}</option>
            {% endfor %}
        </select>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      <div onsubmit="Shared">
      <button type="submit" class="btn btn-primary" onclick = "alert('Event Email shared successfully');location.href = '{{ object.get_share_url }}'" data-target="#shared" >Share</button>
      </div>
    </div>
  </div>
</div>
</div>

{% endblock %}

{% block content2 %}

<script type="text/javascript">
  //console.log({{Users}});
  $('#share_event').on('show.bs.modal', function () {
       //evt_id = $("#share_event").data('id');
    //   console.log(Users);

      $('#share_event_popup').trigger('focus');
    });


    // showPopUp(){
    //   var popup = document.getElementById("share_event_popup");
    //   popup.classList.toggle("show");
    // }
</script>

{% endblock %}
